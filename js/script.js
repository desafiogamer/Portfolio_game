import*as e from"../build/three.module.js";import{GLTFLoader as t}from"../jsm/GLTFLoader.js";import{CharacterControls as n}from"./charaterControls.js";import{OrbitControls as o}from"../jsm/OrbitControls.js";import{CSS2DRenderer as i,CSS2DObject as a}from"../jsm/CSS2DRenderer.js";let scene,camera,renderer,characterControls,orbitControls,keysPressed,labelRenderer,mixer,mixer3,mixerLivro,mixerCat;function init(){scene=new e.Scene,(camera=new e.PerspectiveCamera(50,window.innerWidth/window.innerHeight,1,100)).position.z=1,camera.rotation.x=1.16,camera.rotation.z=.27;let s=new e.AmbientLight(16777215,.7);scene.add(s);let l=new e.DirectionalLight(16777215,1);scene.add(l);let r=new e.AmbientLight(4013373,.7),d=new e.PointLight(13825020,1,3.5,0);d.position.set(18,.38,1);let c=new e.PointLight(404873,10,4,0);c.position.set(0,0,-12);let p=new e.DirectionalLight(14545399,.5);p.position.set(0,0,5);let m=new e.PointLight(404873,10,3,0);m.position.set(-16.9,2.8,-5);let u=new e.PointLight(16777215,20,3,0);u.position.set(0,5.8,-11),renderer=new e.WebGLRenderer({antialias:!0}),scene.fog=new e.FogExp2(1118495,.002),renderer.setClearColor(scene.fog.color),renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(renderer.domElement),(labelRenderer=new i).setSize(window.innerWidth,window.innerHeight),labelRenderer.domElement.style.position="absolute",labelRenderer.domElement.style.top="0px",labelRenderer.domElement.style.pointerEvents="none",document.body.appendChild(labelRenderer.domElement);let h=new e.Mesh(new e.PlaneGeometry(40,20));h.rotation.x=-Math.PI/2,h.position.set(0,9,-5),scene.add(h);let _=new e.TextureLoader,y=_.load("./textures/placeholder/texturaParede.jpg"),w=new e.MeshPhongMaterial({map:y}),b=new e.PlaneGeometry(40,9,40,10),$=new e.Mesh(b,w);$.position.set(0,4.5,-14.9),scene.add($);let f=new e.PlaneGeometry(20,9,20,10),v=new e.Mesh(f,w);v.position.set(19.9,4.5,-5),v.rotation.y=-Math.PI/2,scene.add(v);let g=new e.PlaneGeometry(20,9,20,10),E=new e.Mesh(g,w);E.position.set(-19.9,4.5,-5),E.rotation.y=+Math.PI/2,scene.add(E);let x=new e.PlaneGeometry(40,9,40,10),L=new e.Mesh(x,w);L.position.set(0,4.5,4.91),L.rotation.y=Math.PI,scene.add(L),function t(){let n=new e.TextureLoader,o=n.load("./textures/placeholder/forroMadeira.jpg"),i=new e.PlaneGeometry(40,20,512,512),a=new e.MeshPhongMaterial({map:o}),s=new e.Mesh(i,a);s.rotation.x=-Math.PI/2,s.position.set(0,0,-5),scene.add(s)}(),function t(){let n=new e.TextureLoader,o=n.load("./textures/placeholder/forro.jpg"),i=new e.PlaneGeometry(40,20,512,512),a=new e.MeshPhongMaterial({map:o}),s=new e.Mesh(i,a);s.rotation.x=+Math.PI/2,s.position.set(0,8.9,-5),scene.add(s)}(),function t(){let n=new e.TextureLoader,o=n.load("./textures/placeholder/tapete_text.jpg"),i=new e.CircleGeometry(5,32),a=new e.MeshPhongMaterial({map:o}),s=new e.Mesh(i,a);s.rotation.x=-Math.PI/2,s.position.set(0,.001,-5),scene.add(s)}(),(orbitControls=new o(camera,renderer.domElement)).enableDamping=!0,orbitControls.minDistance=5.7,orbitControls.maxDistance=5.7,orbitControls.enablePan=!1,orbitControls.maxPolarAngle=Math.PI/2-.05,orbitControls.enableZoom=!1,orbitControls.update();let C=new e.AudioListener;scene.add(C);let A=new e.Audio(C),j=new e.AudioLoader;j.load("../sound/trilhaSonora.mp3",e=>{A.setBuffer(e),A.setLoop(!0),A.setVolume(.5)});let k=new e.Audio(C),P=new e.AudioLoader;P.load("../sound/pcligando.mp3",e=>{k.setBuffer(e),k.setLoop(!1),k.setVolume(1)});let B=new e.Audio(C),M=new e.AudioLoader;M.load("../sound/JG185.mp3",e=>{B.setBuffer(e),B.setLoop(!1),B.setVolume(.5)});let O=new e.Audio(C),D=new e.AudioLoader;D.load("../sound/corteSound.mp3",e=>{O.setBuffer(e),O.setLoop(!1),O.setVolume(1)});let I=new e.Audio(C),R=new e.AudioLoader;R.load("../sound/luzAcendendo.mp3",e=>{I.setBuffer(e),I.setLoop(!1),I.setVolume(1)});let S=new e.Audio(C),F=new e.AudioLoader;F.load("../sound/click.mp3",e=>{S.setBuffer(e),S.setLoop(!1),S.setVolume(1)});let G=new e.Audio(C),z=new e.AudioLoader;z.load("../sound/page_Q5XoIdHJ.mp3",e=>{G.setBuffer(e),G.setLoop(!1),G.setVolume(1)});let T=document.getElementById("paraTrilha"),N=document.getElementById("ativarTrilha");T.addEventListener("click",()=>{A.stop(),T.style.display="none",N.style.display="block",S.play()}),N.addEventListener("click",()=>{A.play(),T.style.display="block",N.style.display="none",S.play()});let W=document.getElementById("inicio"),V=document.createElement("button");W.appendChild(V),V.className="fechar",V.textContent="X",V.addEventListener("click",()=>{W.classList.remove("ativo"),V.style.display="none",S.play()});let H=document.getElementById("about"),X=document.createElement("button");H.appendChild(X),X.className="fechar",X.textContent="X",X.addEventListener("click",()=>{H.classList.remove("ativo"),X.style.display="none",S.play()});let q=document.getElementById("contact"),J=document.createElement("button");q.appendChild(J),J.className="fechar",J.textContent="X",J.addEventListener("click",()=>{q.classList.remove("ativo"),J.style.display="none",S.play()});let Y=document.createElement("div");Y.className="vozSkills";let K=new a(Y);scene.add(K),K.position.set(0,8,-16),Y.addEventListener("click",()=>{B.play()});let Q="../img/icons/three-js.png",Z="../img/icons/html-5.png",U="../img/icons/css.png",ee="../img/icons/javascript-50.png";function et(t,n,o,i){let a=new e.TextureLoader,s=a.load(t),l=new e.PlaneGeometry(.8,.8,1,1),r=new e.MeshPhongMaterial({map:s}),d=new e.Mesh(l,r);d.position.set(n,o,i),scene.add(d)}function en(t,n,o,i,a,s){let l=new e.TextureLoader,r=l.load(t),d=new e.PlaneGeometry(a,s,20,10),c=new e.MeshPhongMaterial({map:r}),p=new e.Mesh(d,c);p.position.set(n,o,i),scene.add(p)}et(Q,16,8,-14.85),et(Z,18,8,-14.85),et(U,14,8,-14.85),et(ee,12,8,-14.85),et(Q,9,8,-14.85),et(Z,7,8,-14.85),et(U,5,8,-14.85),et(ee,3,8,-14.85),et("../img/icons/gsap.png",1,8,-14.85),et(Q,-8,8,-14.85),et(Z,-6,8,-14.85),et(U,-4,8,-14.85),et(ee,-2,8,-14.85),et("../img/icons/django-icon.png",-19,8,-14.85),et(Z,-17,8,-14.85),et(U,-15,8,-14.85),et(ee,-13,8,-14.85),et("../img/icons/jquery.png",-11,8,-14.85),en("./textures/placeholder/projetoCasa.png",15,4,-14.85,9,5),en("./textures/placeholder/apple.png",5,4,-14.85,9,5),en("./textures/placeholder/projeto-sony.png",-5,4,-14.85,9,5),en("./textures/placeholder/Projeto-novo.png",-15,4,-14.85,9,5);let eo=document.createElement("div");eo.setAttribute("id","projetoOne");let ei=document.createElement("div");ei.setAttribute("class","conteudo"),eo.appendChild(ei),ei.style.display="none";let ea=new a(eo);scene.add(ea),ea.position.set(16,4,-16);let es=document.createElement("p");es.textContent="Landing page moderna com anima\xe7\xf5es avan\xe7ada no scroll interagindo com modelo 3D.",ei.appendChild(es);let el=document.createElement("a");el.setAttribute("href","https://projeto-scroll.vercel.app/"),el.setAttribute("target","_blank");let er=document.createElement("i");er.setAttribute("class","bi bi-link"),el.appendChild(er),ei.appendChild(el),eo.addEventListener("mousemove",()=>{ei.style.display="flex"}),eo.addEventListener("mouseout",()=>{ei.style.display="none"});let ed=document.createElement("div");ed.setAttribute("id","projetoOne");let ec=document.createElement("div");ec.setAttribute("class","conteudo"),ed.appendChild(ec),ec.style.display="none";let ep=new a(ed);scene.add(ep),ep.position.set(5,4,-16);let em=document.createElement("p");em.textContent="Landing page (e-commerce), utilizei algumas blibiotecas de JS para aprimorar ainda mais meu front-end.",ec.appendChild(em);let eu=document.createElement("a");eu.setAttribute("href","https://projeto-three-js.vercel.app/"),eu.setAttribute("target","_blank");let eh=document.createElement("i");eh.setAttribute("class","bi bi-link"),eu.appendChild(eh),ec.appendChild(eu),ed.addEventListener("mousemove",()=>{ec.style.display="flex"}),ed.addEventListener("mouseout",()=>{ec.style.display="none"});let e_=document.createElement("div");e_.setAttribute("id","projetoOne");let ey=document.createElement("div");ey.setAttribute("class","conteudo"),e_.appendChild(ey),ey.style.display="none";let ew=new a(e_);scene.add(ew),ew.position.set(-5,4,-16);let eb=document.createElement("p");eb.textContent="Landing Page (e-commerce) como foco em anima\xe7\xf5es.",ey.appendChild(eb);let e$=document.createElement("a");e$.setAttribute("href","https://projeto-sony.vercel.app/"),e$.setAttribute("target","_blank");let ef=document.createElement("i");ef.setAttribute("class","bi bi-link"),e$.appendChild(ef),ey.appendChild(e$),e_.addEventListener("mousemove",()=>{ey.style.display="flex"}),e_.addEventListener("mouseout",()=>{ey.style.display="none"});let ev=document.createElement("div");ev.setAttribute("id","projetoOne");let eg=document.createElement("div");eg.setAttribute("class","conteudo"),ev.appendChild(eg),eg.style.display="none";let eE=document.createElement("p");eE.textContent="Projeto BackEnd. fiz basicamente um sistema de crood complexo.",eg.appendChild(eE);let ex=document.createElement("a");ex.setAttribute("href","http://www.desafiogamer.online/"),ex.setAttribute("target","_blank");let e3=document.createElement("i");e3.setAttribute("class","bi bi-link"),ex.appendChild(e3),eg.appendChild(ex);let eL=new a(ev);scene.add(eL),eL.position.set(-16,4,-16),ev.addEventListener("mousemove",()=>{eg.style.display="flex"}),ev.addEventListener("mouseout",()=>{eg.style.display="none"});let eC=document.createElement("p"),e6=document.createElement("button");e6.textContent="Entrar",eC.textContent="Contato";let e0=document.createElement("div");e0.setAttribute("id","contato"),e0.appendChild(e6),e0.appendChild(eC);let e1=new a(e0);scene.add(e1),e1.position.set(19,1,-10),e6.addEventListener("click",()=>{q.classList.add("ativo"),J.style.display="block",G.play()});let e2=document.createElement("p"),eA=document.createElement("button");eA.textContent="Entrar",e2.textContent="Skills";let ej=document.createElement("div");ej.setAttribute("id","home"),ej.appendChild(eA),ej.appendChild(e2);let ek=new a(ej);scene.add(ek),ek.position.set(-18.7,1.5,-5),eA.addEventListener("click",()=>{W.classList.add("ativo"),V.style.display="block",k.play()}),ej.addEventListener("mousemove",()=>{eA.className="ativo"}),ej.addEventListener("mouseout",()=>{eA.className="remove"});let eP=document.createElement("p"),e7=document.createElement("button");e7.textContent="Entrar",eP.textContent="Sobre";let eB=document.createElement("div");eB.setAttribute("id","sobre"),eB.appendChild(e7),eB.appendChild(eP);let eM=new a(eB);scene.add(eM),eM.position.set(18.8,1.2,1),e7.addEventListener("click",()=>{H.classList.add("ativo"),X.style.display="block",O.play()});let eO=document.createElement("div"),e8=document.createElement("i"),eD=document.createElement("i");e8.setAttribute("class","bi bi-lightbulb"),eD.setAttribute("class","bi bi-lightbulb-off"),eO.appendChild(e8),eO.appendChild(eD),eO.setAttribute("id","projetos");let eI=new a(eO);scene.add(eI),eI.position.set(-19.85,1.8,-10),eD.style.display="none",e8.addEventListener("click",()=>{scene.remove(l),scene.remove(s),scene.add(r),scene.add(d),scene.add(p),scene.add(m),scene.add(u),e8.style.display="none",eD.style.display="flex",I.play()}),eD.addEventListener("click",()=>{scene.remove(d),scene.remove(p),scene.remove(m),scene.remove(u),scene.remove(r),scene.add(l),scene.add(s),e8.style.display="flex",eD.style.display="none",I.play()});var e4=new e.Vector3;let eR=new t().setPath("./models/");eR.load("personagem2.glb",function(t){let o=t.scene;o.scale.set(1.2,1.2,1.2),scene.add(o);let i=t.animations,a=new e.AnimationMixer(o),s=new Map;i.filter(e=>"Tpose"!=e.name).forEach(e=>{s.set(e.name,a.clipAction(e))}),characterControls=new n(o,a,s,orbitControls,camera,"Idle"),!function t(){!function t(){let n=!1,o=new e.Box3().setFromObject(characterControls.model),i=[new e.Box3().setFromObject(eS),new e.Box3().setFromObject(eT),new e.Box3().setFromObject(ez),new e.Box3().setFromObject(eW),new e.Box3().setFromObject($),new e.Box3().setFromObject(v),new e.Box3().setFromObject(E),new e.Box3().setFromObject(L),];i.forEach(e=>{o.intersectsBox(e)&&(n=!0)}),n?characterControls.model.position.copy(e4):e4.copy(characterControls.model.position)}(),requestAnimationFrame(t)}()});let eS=new e.Object3D;eR.load("goku.glb",function(e){eS.add(e.scene),eS.scale.set(4,4,4),eS.rotation.y=1.5,eS.position.set(18.8,0,1),scene.add(eS),eB.addEventListener("mousemove",()=>{e7.className="ativo"}),eB.addEventListener("mouseout",()=>{e7.className="remove"})});let eF=new e.Object3D;eR.load("shelf.glb",function(e){eF.add(e.scene),eF.scale.set(.2,.2,.2),eF.rotation.y=-1.6,eF.position.set(19.5,1,-5),scene.add(eF)});let eG=new e.Object3D;eR.load("light_switch_v2_textured.glb",function(e){eG.add(e.scene),eG.scale.set(2,2,2),eG.position.set(-19.85,1.8,-10),scene.add(eG)});let e5=new e.Object3D;eR.load("air_conditioning.glb",function(e){e5.add(e.scene),e5.scale.set(5,5,5),e5.rotation.y=1.57,e5.position.set(-19.5,6,-5),scene.add(e5)});let ez=new e.Object3D;eR.load("sofa.glb",function(e){ez.add(e.scene),ez.scale.set(2.8,2.8,2.8),ez.rotation.y=-1.55,ez.position.set(18.7,.9,-5),scene.add(ez)});let eT=new e.Object3D;eR.load("gaming_setup_low-poly.glb",function(e){eT.add(e.scene),eT.scale.set(1.3,1.3,1.3),eT.position.set(-18.7,0,-5),scene.add(eT)});let eN=new e.Object3D;eR.load("cat_murdered_soul_suspect.glb",function(t){eN.add(t.scene),eN.scale.set(.03,.03,.03),eN.rotation.y=-1.5,eN.position.set(0,0,-14),scene.add(eN),mixerCat=new e.AnimationMixer(eN),t.animations.forEach(e=>{mixerCat.clipAction(e).play(),mixerCat.clipAction(e).clampWhenFinished=!0})});let eW=new e.Object3D;eR.load("table.glb",function(e){eW.add(e.scene),eW.scale.set(.3,.3,.3),eW.rotation.y=1,eW.position.set(19,0,-10),scene.add(eW)});let eV=new e.Object3D;eR.load("book_animated_book__historical_book.glb",function(t){eV.add(t.scene),eV.scale.set(.2,.2,.2),eV.rotation.y=-1.5,eV.position.set(19,1,-10),scene.add(eV),mixerLivro=new e.AnimationMixer(eV),e0.addEventListener("mousemove",()=>{e6.className="ativo",t.animations.forEach(e=>{mixerLivro.clipAction(e).play(),mixerLivro.clipAction(e).clampWhenFinished=!0})}),e0.addEventListener("mouseout",()=>{e6.className="remove",t.animations.forEach(e=>{mixerLivro.clipAction(e).stop()})})});let eH=new e.Object3D;eR.load("stage_light_-_fresnel.glb",function(e){eH.add(e.scene),eH.rotation.y=1.5,eH.scale.set(.3,.3,.3),eH.position.set(0,7.4,-10),scene.add(eH)}),keysPressed={},document.addEventListener("keydown",e=>{e.shiftKey&&characterControls?characterControls.switchRunToggle():keysPressed[e.key.toLowerCase()]=!0},!1),document.addEventListener("keyup",e=>{keysPressed[e.key.toLowerCase()]=!1},!1);var eX=document.querySelector(".card"),eq=function(e,t){eX.style.setProperty("--ratio-x",e),eX.style.setProperty("--ratio-y",t)},eJ=function(e){var t=e.x,n=e.y;eX.classList.remove("rotate");var o,i=eX.getBoundingClientRect(),a=i.width/2,s=i.height/2;eq((t-(i.x+a))/a,(n-(i.y+s))/s)};eX.addEventListener("pointermove",eJ),eX.addEventListener("pointerleave",function(){return eq(0,0)}),window.addEventListener("resize",function(){camera.aspect=this.window.innerWidth/this.window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(this.window.innerWidth,this.window.innerHeight),labelRenderer.setSize(this.window.innerWidth,this.window.innerHeight)});let eY=document.getElementById("joystick"),e9=document.getElementById("stick"),eK=0,eQ=0,eZ=!1;function eU(e){let t=new KeyboardEvent("keydown",{key:e});document.dispatchEvent(t)}function te(e){let t=new KeyboardEvent("keyup",{key:e});document.dispatchEvent(t)}function tt(e,t){let n=eY.getBoundingClientRect(),o=n.left+n.width/2,i=n.top+n.height/2,a=e-o,s=t-i,l=Math.sqrt(a*a+s*s),r=Math.min(n.width,n.height)/2-25;if(l>r){let d=r/l;e=o+a*d,t=i+s*d}e9.style.transform=`translate(${e-eK}px, ${t-eQ}px)`;let c=Math.atan2(s,a)*(180/Math.PI);c>=-135&&c<-45?(te("d"),te("s"),te("a"),eU("w")):c>=-45&&c<45?(te("w"),te("s"),te("a"),eU("d")):c>=45&&c<135?(te("w"),te("a"),te("d"),eU("s")):(te("w"),te("d"),te("s"),eU("a"))}eY.addEventListener("touchstart",e=>{if(e.preventDefault(),!eZ){eZ=!0;let t=e.touches[0];eY.getBoundingClientRect(),eK=t.clientX,eQ=t.clientY,e9.style.transition="none",tt(t.clientX,t.clientY)}}),eY.addEventListener("touchmove",e=>{if(e.preventDefault(),eZ){let t=e.touches[0];tt(t.clientX,t.clientY)}}),eY.addEventListener("touchend",e=>{e.preventDefault(),eZ&&(eZ=!1,e9.style.transition="transform 0.1s ease-out",e9.style.transform="translate(0, 0)",te("w"),te("a"),te("s"),te("d"))}),animate()}let clock=new e.Clock;function animate(){let e=clock.getDelta();characterControls&&characterControls.update(e,keysPressed),mixer&&mixer.update(e),mixer3&&mixer3.update(e),mixerLivro&&mixerLivro.update(e),mixerCat&&mixerCat.update(e),orbitControls.update(),labelRenderer.render(scene,camera),renderer.render(scene,camera),requestAnimationFrame(animate)}init();
